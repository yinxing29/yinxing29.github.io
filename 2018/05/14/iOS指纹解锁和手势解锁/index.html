<!DOCTYPE html>
<html>
    <!-- title -->




<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" >
    <meta name="author" content="yinxing29'blog">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="yinxing29'blog">
    <meta name="keywords" content="yinxing29'blog | yinxing29'blog">
    <meta name="description" content="">
    <meta name="Cache-Control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é” Â· yinxing29&#39;blog</title>
    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s 1;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }

</style>

    <link rel="preload" href= /css/style.css?v=20180501 as="style" onload="this.onload=null;this.rel='stylesheet'" />
    <link rel="stylesheet" href= /css/mobile.css?v=20180501 media="(max-width: 980px)">
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" />
        
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
(function( w ){
	"use strict";
	// rel=preload support test
	if( !w.loadCSS ){
		w.loadCSS = function(){};
	}
	// define on the loadCSS obj
	var rp = loadCSS.relpreload = {};
	// rel=preload feature support test
	// runs once and returns a function for compat purposes
	rp.support = (function(){
		var ret;
		try {
			ret = w.document.createElement( "link" ).relList.supports( "preload" );
		} catch (e) {
			ret = false;
		}
		return function(){
			return ret;
		};
	})();

	// if preload isn't supported, get an asynchronous load by using a non-matching media attribute
	// then change that media back to its intended value on load
	rp.bindMediaToggle = function( link ){
		// remember existing media attr for ultimate state, or default to 'all'
		var finalMedia = link.media || "all";

		function enableStylesheet(){
			link.media = finalMedia;
		}

		// bind load handlers to enable media
		if( link.addEventListener ){
			link.addEventListener( "load", enableStylesheet );
		} else if( link.attachEvent ){
			link.attachEvent( "onload", enableStylesheet );
		}

		// Set rel and non-applicable media type to start an async request
		// note: timeout allows this to happen async to let rendering continue in IE
		setTimeout(function(){
			link.rel = "stylesheet";
			link.media = "only x";
		});
		// also enable media after 3 seconds,
		// which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
		setTimeout( enableStylesheet, 3000 );
	};

	// loop through link elements in DOM
	rp.poly = function(){
		// double check this to prevent external calls from running
		if( rp.support() ){
			return;
		}
		var links = w.document.getElementsByTagName( "link" );
		for( var i = 0; i < links.length; i++ ){
			var link = links[ i ];
			// qualify links to those with rel=preload and as=style attrs
			if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
				// prevent rerunning on link
				link.setAttribute( "data-loadcss", true );
				// bind listeners to toggle media back
				rp.bindMediaToggle( link );
			}
		}
	};

	// if unsupported, run the polyfill
	if( !rp.support() ){
		// run once at least
		rp.poly();

		// rerun poly on an interval until onload
		var run = w.setInterval( rp.poly, 500 );
		if( w.addEventListener ){
			w.addEventListener( "load", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		} else if( w.attachEvent ){
			w.attachEvent( "onload", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		}
	}


	// commonjs
	if( typeof exports !== "undefined" ){
		exports.loadCSS = loadCSS;
	}
	else {
		w.loadCSS = loadCSS;
	}
}( typeof global !== "undefined" ? global : this ) );
</script>

    <link rel="icon" href= "http://p5m3egx6g.bkt.clouddn.com/WechatIMG5.jpeg" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js" as="script" />    
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" as="script" />
    <link rel="preload" href="/scripts/main.js" as="script" />
    <link rel="preload" as="font" href="/font/Oswald-Regular.ttf" crossorigin>
    <link rel="preload" as="font" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" crossorigin>
    <!-- ç™¾åº¦ç»Ÿè®¡  -->
    
    <!-- è°·æ­Œç»Ÿè®¡  -->
    
</head>

    
        <body class="post-body">
    
    
<header class="header">

    <div class="read-progress"></div>
    <div class="header-sidebar-menu">&#xe775;</div>
    <!-- posté¡µçš„toggle banner  -->
    
    <div class="banner">
            <div class="blog-title">
                <a href="/" >yinxing29</a>
            </div>
            <div class="post-title">
                <a href="#" class="post-name">iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”</a>
            </div>
    </div>
    
    <a class="home-link" href=/>yinxing29</a>
</header>
    <div class="wrapper">
        <div class="site-intro" style=








height:50vh;

>
    
    <!-- ä¸»é¡µ  -->
    
    
    <!-- 404é¡µ  -->
            
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- æ ‡é¢˜  -->
        <h1 class="intro-title">
            <!-- ä¸»é¡µ  -->
            
            iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”
            <!-- 404 -->
            
        </h1>
        <!-- å‰¯æ ‡é¢˜ -->
        <p class="intro-subtitle">
            <!-- ä¸»é¡µå‰¯æ ‡é¢˜  -->
            
            
            <!-- 404 -->
            
        </p>
        <!-- æ–‡ç« é¡µmeta -->
        
            <!-- æ–‡ç« é¡µæ ‡ç­¾  -->
            
            <div class="post-intro-meta">
                <span class="post-intro-calander iconfont-archer">&#xe676;</span>
                <span class="post-intro-time">2018/05/14</span>
                
                <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                    <span class="iconfont-archer">&#xe602;</span>
                    <span id="busuanzi_value_page_pv"></span>
                </span>
                
                <span class="shareWrapper">
                    <span class="iconfont-archer shareIcon">&#xe71d;</span>
                    <span class="shareText">Share</span>
                    <ul class="shareList">
                        <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                            <div class="share-qrcode"></div>
                        </li>
                        <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                        <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                        <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                        <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                    </ul>
                </span>
            </div>
        
    </div>
</div>
        <script>
  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (cb) { o.addEventListener('load', function (e) { cb(null, e); }, false); }
    if (err) { o.addEventListener('error', function (e) { err(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
  
  // get user agent
  var browser = {
    versions: function () {
      var u = window.navigator.userAgent;
      return {
        userAgent: u,
        trident: u.indexOf('Trident') > -1, //IEå†…æ ¸
        presto: u.indexOf('Presto') > -1, //operaå†…æ ¸
        webKit: u.indexOf('AppleWebKit') > -1, //è‹¹æœã€è°·æ­Œå†…æ ¸
        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //ç«ç‹å†…æ ¸
        mobile: !!u.match(/AppleWebKit.*Mobile.*/), //æ˜¯å¦ä¸ºç§»åŠ¨ç»ˆç«¯
        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //iosç»ˆç«¯
        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //androidç»ˆç«¯æˆ–è€…ucæµè§ˆå™¨
        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //æ˜¯å¦ä¸ºiPhoneæˆ–è€…å®‰å“QQæµè§ˆå™¨
        iPad: u.indexOf('iPad') > -1, //æ˜¯å¦ä¸ºiPad
        webApp: u.indexOf('Safari') == -1, //æ˜¯å¦ä¸ºwebåº”ç”¨ç¨‹åºï¼Œæ²¡æœ‰å¤´éƒ¨ä¸åº•éƒ¨
        weixin: u.indexOf('MicroMessenger') == -1, //æ˜¯å¦ä¸ºå¾®ä¿¡æµè§ˆå™¨
        uc: u.indexOf('UCBrowser') > -1 //æ˜¯å¦ä¸ºandroidä¸‹çš„UCæµè§ˆå™¨
      };
    }()
  }
  console.log("userAgent:" + browser.versions.userAgent);

  // callback
  function fontLoaded() {
    console.log('font loaded');
    if (document.getElementsByClassName('site-intro-meta')) {
      document.getElementsByClassName('intro-title')[0].classList.add('intro-fade-in');
      document.getElementsByClassName('intro-subtitle')[0].classList.add('intro-fade-in');
      var postIntroTags = document.getElementsByClassName('post-intro-tags')[0],
        postIntroMeat = document.getElementsByClassName('post-intro-meta')[0];
      if (postIntroTags) {
        postIntroTags.classList.add('post-fade-in');
      }
      if (postIntroMeat) {
        postIntroMeat.classList.add('post-fade-in');
      }
    }
  }

  // UCä¸æ”¯æŒè·¨åŸŸï¼Œæ‰€ä»¥ç›´æ¥æ˜¾ç¤º
  function asyncCb(){
    if (browser.versions.uc) {
      console.log("UCBrowser");
      fontLoaded();
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular']
        },
        loading: function () {  //æ‰€æœ‰å­—ä½“å¼€å§‹åŠ è½½
          // console.log('loading');
        },
        active: function () {  //æ‰€æœ‰å­—ä½“å·²æ¸²æŸ“
          fontLoaded();
        },
        inactive: function () { //å­—ä½“é¢„åŠ è½½å¤±è´¥ï¼Œæ— æ•ˆå­—ä½“æˆ–æµè§ˆå™¨ä¸æ”¯æŒåŠ è½½
          console.log('inactive: timeout');
          fontLoaded();
        },
        timeout: 5000 // Set the timeout to two seconds
      });
    }
  }

  function asyncErr(){
    console.warn('script load from CDN failed, will load local script')
  }

  var asyncLoadWithFallBack = function(arr, success, reject) {
      var currReject = function(){
        reject()
        arr.shift()
        if(arr.length)
          async(arr[0], success, currReject)
        }

      async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack([
    "https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js", 
    "https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js",
    "/lib/webfontloader.min.js"
  ], asyncCb, asyncErr)
</script>        
        <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
        <div class="container container-unloaded">
            <main class="main post-page">
    <article class="article-entry">
        <h1 id="iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”"><a href="#iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”" class="headerlink" title="iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”"></a>iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”</h1><p>[TOC]</p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸€ç›´æƒ³å†™åšå®¢æ¥ç€ï¼Œä¸€æ¥å¯ä»¥è®°å½•ä¸€äº›è‡ªå·±å­¦ä¹ å’Œç ”ç©¶çš„ä¸œè¥¿ï¼ŒäºŒæ¥ä¹Ÿå¯ä»¥å°†è‡ªå·±å†™çš„ä¸€äº›ä¸œè¥¿åˆ†äº«å‡ºå»ï¼Œç»™ä»–äººå‚è€ƒï¼Œè¿˜å¯èƒ½æ”¶åˆ°ä»–äººçš„ä¸€äº›å»ºè®®ï¼Œä»è€Œå®Œå–„è‡ªå·±çš„é¡¹ç›®å’Œæå‡è‡ªå·±çš„æŠ€æœ¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§å¾ˆå¥½çš„æŠ€æœ¯äº¤æµæ–¹å¼ã€‚ä½†æ˜¯ä¹‹å‰ä¸€ç›´ä¸çŸ¥é“æ€ä¹ˆå»å†™ï¼Ÿæ€ä¹ˆå»æ€»ç»“ï¼Ÿåœ¨ç»è¿‡ä¸€äº›è§‚æ‘©å’Œå­¦ä¹ åï¼Œç»ˆäºå†³å®šå…ˆæ¥è¯•è¯•æ°´äº†ğŸ˜‚ã€‚ä¸‹é¢æ­£å¼å¼€å§‹æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ã€‚</p>
<blockquote>
<p>è¿™ç¯‡åšå®¢æ˜¯è‡ªå·±åŸºäº<code>iOS</code>ç³»ç»Ÿå®ç°çš„æŒ‡çº¹è§£é”ï¼ˆç³»ç»ŸAPIï¼‰å’Œæ‰‹åŠ¿è§£é”ï¼ˆCAShapeLayerï¼‰åŠŸèƒ½ã€‚</p>
</blockquote>
<blockquote>
<p>åœ¨ä¹‹å‰è‡ªå­¦<code>CAAnimation</code>ï¼Œå†åŠ ä¸Šå…¬å¸è€å¤§è¯´å¯ä»¥é¢„ç ”ï¼ˆä¹‹å‰æ²¡æœ‰åšè¿‡ï¼‰ä¸€ä¸‹å„ç§è§£é”æ–¹å¼çš„æƒ…å†µä¸‹ï¼Œæƒ³ç€è‡ªå·±æ¥å®ç°ä¸€ä¸‹ç°åœ¨å¸¸ç”¨çš„è§£é”æ–¹å¼ï¼š<code>æŒ‡çº¹è§£é”</code>å’Œ<code>æ‰‹åŠ¿è§£é”</code>ã€‚</p>
</blockquote>
<h2 id="æŒ‡çº¹è§£é”"><a href="#æŒ‡çº¹è§£é”" class="headerlink" title="æŒ‡çº¹è§£é”"></a>æŒ‡çº¹è§£é”</h2><p>åŸºäºiOSçš„æŒ‡çº¹è§£é”å…¶å®å¾ˆç®€å•ï¼Œå› ä¸ºç³»ç»Ÿå·²ç»æä¾›äº†<code>API</code>ç»™ä½ ï¼Œä½ åªéœ€è¦åšä¸€äº›ç®€å•çš„åˆ¤æ–­å’Œé€‚æ—¶çš„è°ƒç”¨å°±å¯ä»¥äº†ã€‚</p>
<h3 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h3><p>é¦–å…ˆå¯¼å…¥å¤´æ–‡ä»¶<code>#import &lt;LocalAuthentication/LocalAuthentication.h&gt;</code> </p>
<p>åˆ¤æ–­æ˜¯å¦å¼€å¯äº†TouchIDï¼Œå¦‚æœå·²ç»å¼€å¯ï¼Œç›´æ¥æ ¡éªŒæŒ‡çº¹ï¼Œå¦‚æœæœªå¼€å¯ï¼Œåˆ™éœ€è¦å…ˆå¼€å¯TouchID</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦å¼€å¯äº†TouchID</span></span><br><span class="line">[[[NSUserDefaults standardUserDefaults] objectForKey:@<span class="string">"OpenTouchID"</span>] boolValue]</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h3><ul>
<li>æœªå¼€å¯TouchIDï¼Œè¯¢é—®æ˜¯å¦å¼€å¯</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)p_openTouchID</span><br><span class="line">&#123;</span><br><span class="line">    dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        UIAlertController *alertController = [UIAlertController alertControllerWithTitle:@<span class="string">"æ¸©é¦¨æç¤º"</span> message:@<span class="string">"æ˜¯å¦å¼€å¯TouchID?"</span> preferredStyle:UIAlertControllerStyleAlert];</span><br><span class="line">        [alertController addAction:[UIAlertAction actionWithTitle:@<span class="string">"YES"</span> style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) &#123;</span><br><span class="line">            <span class="comment">//å¼€å¯TouchID</span></span><br><span class="line">            [[NSUserDefaults standardUserDefaults] setObject:@(YES) forKey:@<span class="string">"OpenTouchID"</span>];</span><br><span class="line">            [[NSNotificationCenter defaultCenter] postNotificationName:@<span class="string">"OpenTouchIDSuccess"</span> object:nil userInfo:nil];</span><br><span class="line">        &#125;]];</span><br><span class="line">        [alertController addAction:[UIAlertAction actionWithTitle:@<span class="string">"NO"</span> style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123;</span><br><span class="line">            <span class="comment">//ä¸å¼€å¯TouchID</span></span><br><span class="line">            [[NSUserDefaults standardUserDefaults] setObject:@(NO) forKey:@<span class="string">"OpenTouchID"</span>];</span><br><span class="line">            [[NSNotificationCenter defaultCenter] postNotificationName:@<span class="string">"OpenTouchIDSuccess"</span> object:nil userInfo:nil];</span><br><span class="line">        &#125;]];</span><br><span class="line">        [self presentViewController:alertController animated:YES completion:nil];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å·²å¼€å¯TouchID</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)p_touchID</span><br><span class="line">&#123;</span><br><span class="line">    dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        LAContext *context = [[LAContext alloc] init];</span><br><span class="line">        NSError *error = nil;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æ”¯æŒTouchID</span></span><br><span class="line">        <span class="keyword">if</span> ([context canEvaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics error:&amp;error]) &#123;</span><br><span class="line">            [context evaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics localizedReason:@<span class="string">"TouchID Text"</span> reply:^(BOOL success, NSError * _Nullable error) &#123;</span><br><span class="line">                <span class="keyword">if</span> (success) &#123;<span class="comment">//æŒ‡çº¹éªŒè¯æˆåŠŸ</span></span><br><span class="line">                    [[NSNotificationCenter defaultCenter] postNotificationName:@<span class="string">"UnlockLoginSuccess"</span> object:nil];</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;<span class="comment">//æŒ‡çº¹éªŒè¯å¤±è´¥</span></span><br><span class="line">                    <span class="keyword">switch</span> (error.code)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> LAErrorAuthenticationFailed:</span><br><span class="line">                        &#123;</span><br><span class="line">                            NSLog(@<span class="string">"æˆæƒå¤±è´¥"</span>); <span class="comment">// -1 è¿ç»­ä¸‰æ¬¡æŒ‡çº¹è¯†åˆ«é”™è¯¯</span></span><br><span class="line">                            [[NSNotificationCenter defaultCenter] postNotificationName:@<span class="string">"touchIDFailed"</span> object:nil];</span><br><span class="line">                        &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> LAErrorUserCancel:</span><br><span class="line">                        &#123;</span><br><span class="line">                            NSLog(@<span class="string">"ç”¨æˆ·å–æ¶ˆéªŒè¯Touch ID"</span>); <span class="comment">// -2 åœ¨TouchIDå¯¹è¯æ¡†ä¸­ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’®</span></span><br><span class="line">                            [self dismissViewControllerAnimated:YES completion:nil];</span><br><span class="line">                        &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> LAErrorUserFallback:</span><br><span class="line">                        &#123;</span><br><span class="line">                            [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123;</span><br><span class="line">                                [[NSNotificationCenter defaultCenter] postNotificationName:@<span class="string">"touchIDFailed"</span> object:nil];</span><br><span class="line">                                NSLog(@<span class="string">"ç”¨æˆ·é€‰æ‹©è¾“å…¥å¯†ç ï¼Œåˆ‡æ¢ä¸»çº¿ç¨‹å¤„ç†"</span>); <span class="comment">// -3 åœ¨TouchIDå¯¹è¯æ¡†ä¸­ç‚¹å‡»äº†è¾“å…¥å¯†ç æŒ‰é’®</span></span><br><span class="line">                            &#125;];</span><br><span class="line">                            </span><br><span class="line">                        &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> LAErrorSystemCancel:</span><br><span class="line">                        &#123;</span><br><span class="line">                            NSLog(@<span class="string">"å–æ¶ˆæˆæƒï¼Œå¦‚å…¶ä»–åº”ç”¨åˆ‡å…¥ï¼Œç”¨æˆ·è‡ªä¸»"</span>); <span class="comment">// -4 TouchIDå¯¹è¯æ¡†è¢«ç³»ç»Ÿå–æ¶ˆï¼Œä¾‹å¦‚æŒ‰ä¸‹Homeæˆ–è€…ç”µæºé”®</span></span><br><span class="line">                        &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> LAErrorPasscodeNotSet:</span><br><span class="line">                            </span><br><span class="line">                        &#123;</span><br><span class="line">                            NSLog(@<span class="string">"è®¾å¤‡ç³»ç»Ÿæœªè®¾ç½®å¯†ç "</span>); <span class="comment">// -5</span></span><br><span class="line">                        &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> LAErrorBiometryNotAvailable:</span><br><span class="line">                        &#123;</span><br><span class="line">                            NSLog(@<span class="string">"è®¾å¤‡æœªè®¾ç½®Touch ID"</span>); <span class="comment">// -6</span></span><br><span class="line">                        &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> LAErrorBiometryNotEnrolled: <span class="comment">// Authentication could not start, because Touch ID has no enrolled fingers</span></span><br><span class="line">                        &#123;</span><br><span class="line">                            NSLog(@<span class="string">"ç”¨æˆ·æœªå½•å…¥æŒ‡çº¹"</span>); <span class="comment">// -7</span></span><br><span class="line">                        &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                            </span><br><span class="line">#if __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_9_0</span><br><span class="line">                        <span class="keyword">case</span> LAErrorBiometryLockout: <span class="comment">//Authentication was not successful, because there were too many failed Touch ID attempts and Touch ID is now locked. Passcode is required to unlock Touch ID, e.g. evaluating LAPolicyDeviceOwnerAuthenticationWithBiometrics will ask for passcode as a prerequisite ç”¨æˆ·è¿ç»­å¤šæ¬¡è¿›è¡ŒTouch IDéªŒè¯å¤±è´¥ï¼ŒTouch IDè¢«é”ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥å¯†ç è§£é”ï¼Œå…ˆTouch IDéªŒè¯å¯†ç </span></span><br><span class="line">                        &#123;</span><br><span class="line">                            NSLog(@<span class="string">"Touch IDè¢«é”ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥å¯†ç è§£é”"</span>); <span class="comment">// -8 è¿ç»­äº”æ¬¡æŒ‡çº¹è¯†åˆ«é”™è¯¯ï¼ŒTouchIDåŠŸèƒ½è¢«é”å®šï¼Œä¸‹ä¸€æ¬¡éœ€è¦è¾“å…¥ç³»ç»Ÿå¯†ç </span></span><br><span class="line">                        &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> LAErrorAppCancel:</span><br><span class="line">                        &#123;</span><br><span class="line">                            NSLog(@<span class="string">"ç”¨æˆ·ä¸èƒ½æ§åˆ¶æƒ…å†µä¸‹APPè¢«æŒ‚èµ·"</span>); <span class="comment">// -9</span></span><br><span class="line">                        &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> LAErrorInvalidContext:</span><br><span class="line">                        &#123;</span><br><span class="line">                            NSLog(@<span class="string">"LAContextä¼ é€’ç»™è¿™ä¸ªè°ƒç”¨ä¹‹å‰å·²ç»å¤±æ•ˆ"</span>); <span class="comment">// -10</span></span><br><span class="line">                        &#125;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">#else</span><br><span class="line">#endif</span><br><span class="line">                        <span class="keyword">default</span>:</span><br><span class="line">                        &#123;</span><br><span class="line">                            [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123;</span><br><span class="line">                                NSLog(@<span class="string">"å…¶ä»–æƒ…å†µï¼Œåˆ‡æ¢ä¸»çº¿ç¨‹å¤„ç†"</span>);</span><br><span class="line">                            &#125;];</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;];</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//ä¸æ”¯æŒ</span></span><br><span class="line">            UIAlertController *alertController = [UIAlertController alertControllerWithTitle:@<span class="string">"æ¸©é¦¨æç¤º"</span> message:@<span class="string">"è¯¥è®¾å¤‡ä¸æ”¯æŒTouchID"</span> preferredStyle:UIAlertControllerStyleAlert];</span><br><span class="line">            [alertController addAction:[UIAlertAction actionWithTitle:@<span class="string">"å®Œæˆ"</span> style:UIAlertActionStyleCancel handler:nil]];</span><br><span class="line">            [self presentViewController:alertController animated:YES completion:nil];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨</strong>ï¼šä»£ç ä¸­çš„<code>NSNotificationCenter</code>ç”¨äºä¸åŒæ“ä½œåçš„ç•Œé¢è·³è½¬ï¼Œé‡æ–°è®¾ç½®<code>window.rootViewController</code>,å¯å¿½ç•¥ã€‚</p>
<p>åˆ°è¿™é‡Œ<code>æŒ‡çº¹è§£é”</code>å°±ç»“æŸäº†ï¼Œå¾ˆç®€å•çš„ä¸€ä¸ª<code>API</code>è°ƒç”¨ã€‚</p>
<hr>
<h2 id="æ‰‹åŠ¿è§£é”"><a href="#æ‰‹åŠ¿è§£é”" class="headerlink" title="æ‰‹åŠ¿è§£é”"></a>æ‰‹åŠ¿è§£é”</h2><p>å…¶å®åœ¨ä¹‹å‰è¿˜æ²¡æœ‰æ¥è§¦å’Œåˆšå¼€å§‹æ¥è§¦iOSå¼€å‘çš„æ—¶å€™ï¼Œè§‰å¾—æ‰‹åŠ¿è§£é”å¾ˆéš¾ï¼Œå®Œå…¨ä¸çŸ¥é“æ€ä¹ˆå»å®ç°ï¼Ÿä½†æ˜¯å½“æˆ‘åœ¨è‡ªå­¦CAAnimationçš„æ—¶å€™ï¼Œè„‘æµ·ä¸­çªç„¶å°±æƒ³åˆ°äº†ä¸€ä¸ªå®ç°æ‰‹åŠ¿è§£é”çš„æ–¹æ¡ˆï¼Œä¸‹é¢å°±å¼€å§‹ä»‹ç»æˆ‘çš„å®ç°æ–¹æ³•ï¼š</p>
<h3 id="æ„æ€"><a href="#æ„æ€" class="headerlink" title="æ„æ€"></a>æ„æ€</h3><ol>
<li><p>æ‰‹åŠ¿è§£é”æ˜¯æ€ä¹ˆå»éªŒè¯ä½ æ»‘åŠ¨çš„æ‰‹åŠ¿æ˜¯æ­£ç¡®çš„ï¼Ÿ</p>
<p> <code>å…¶å®æ‰‹åŠ¿è§£é”å’Œè¾“å…¥å¯†ç çš„éªŒè¯æ˜¯ä¸€æ ·çš„ï¼Œåœ¨ä½ ç”»UIçš„æ—¶å€™ï¼Œä½ å¯ä»¥ç»™æ¯ä¸€ä¸ª*åœ†ç‚¹*ä¸€ä¸ªidï¼Œåœ¨ä½ è®¾ç½®æ‰‹åŠ¿çš„æ—¶å€™ï¼Œå°†æ»‘åŠ¨åˆ°å¯¹åº”*åœ†ç‚¹*çš„idæ”¾å…¥ä¸€ä¸ªæœ‰åºé›†åˆä¸­ï¼Œå¹¶ä¿å­˜èµ·æ¥ï¼Œç„¶åéªŒè¯ç™»å½•çš„æ—¶å€™ï¼Œç”¨å¦å¤–ä¸€ä¸ªæœ‰åºé›†åˆè®°å½•ä½ å½“å‰æ»‘åŠ¨åˆ°çš„*åœ†ç‚¹*idï¼Œç„¶åå’Œä¹‹å‰ä¿å­˜åœ¨æœ¬åœ°çš„è¿›è¡Œå¯¹æ¯”ï¼Œå°±å¯ä»¥è¾¾åˆ°éªŒè¯çš„ç›®çš„äº†</code></p>
</li>
<li><p>ç”¨ä»€ä¹ˆæ–¹å¼å»å…·ä½“å®ç°UIï¼Ÿ</p>
<p> <code>åœ¨ä¹‹å‰æƒ³è¿‡å‡ ç§å®ç°æ–¹å¼ï¼Œä½†æ˜¯éƒ½è¢«passæ‰äº†ï¼Œç›´åˆ°è‡ªå­¦CAAnimationçš„æ—¶å€™ï¼Œæ‰çªç„¶æ„è¯†åˆ°æœ‰ä¸€ä¸ªå¾ˆå¥½çš„å®ç°æ–¹å¼----CAShapeLayer</code></p>
</li>
</ol>
<p>å…¶å®ï¼Œå½“ä½ æœ‰äº†è¿™ä¸¤ä¸ªé—®é¢˜çš„ç­”æ¡ˆçš„æ—¶å€™ï¼Œä½ çš„æ‰‹åŠ¿è§£é”å°±å·²ç»å®ç°äº†ä¸€å¤§éƒ¨åˆ†ï¼Œåé¢çš„éƒ¨åˆ†å°±æ˜¯æ•²ä»£ç äº†ã€‚</p>
<h3 id="å®ç°-ï¼ˆå·¥ç¨‹ä»£ç è§æ–‡æœ«é“¾æ¥ï¼‰"><a href="#å®ç°-ï¼ˆå·¥ç¨‹ä»£ç è§æ–‡æœ«é“¾æ¥ï¼‰" class="headerlink" title="å®ç° ï¼ˆå·¥ç¨‹ä»£ç è§æ–‡æœ«é“¾æ¥ï¼‰"></a>å®ç° <strong>ï¼ˆå·¥ç¨‹ä»£ç è§æ–‡æœ«é“¾æ¥ï¼‰</strong></h3><blockquote>
<p>å…ˆä¸Šå‡ å¼ æ•ˆæœå›¾ï¼šï¼ˆç”±äºæœ¬äººè‰ºæœ¯ç»†èƒæœ‰é™ï¼Œæ‰€ä»¥ä¸ºäº†å¥½çœ‹ç‚¹ï¼Œç•Œé¢çš„UIæ˜¯å‚ç…§QQå®‰å…¨ä¸­å¿ƒçš„æ‰‹åŠ¿è§£é”ï¼‰</p>
</blockquote>
<p><img src="https://user-gold-cdn.xitu.io/2018/3/15/162279e0de57f2b4?w=621&amp;h=367&amp;f=png&amp;s=133661" alt="è®¾ç½®æ‰‹åŠ¿"></p>
<blockquote>
<p>ç›®å½•ç»“æ„</p>
</blockquote>
<p><img src="https://user-gold-cdn.xitu.io/2018/3/14/16223ad2f52615f3?w=223&amp;h=163&amp;f=png&amp;s=22874" alt="æ‰‹åŠ¿è§£é”ç›®å½•ç»“æ„"></p>
<ul>
<li><code>GesturesViewController</code>ï¼šè¿™ä¸ª<code>controller</code>ç”¨äºå±•ç¤º<code>UI</code>ï¼Œä½ å¯ä»¥æ›¿æ¢æˆè‡ªå·±<code>controller</code>,</li>
<li><code>GesturesView</code>ï¼šç”¨äº<code>åœ†ç‚¹</code>æŒ‰é’®çš„åˆå§‹åŒ–å’Œå¸ƒå±€,</li>
<li><code>PointView</code>ï¼š<code>åœ†ç‚¹</code>æ‰‹åŠ¿æŒ‰é’®ã€‚</li>
</ul>
<p>è¿™é‡Œä¸»è¦ä»‹ç»ä¸€ä¸‹GesturesViewå’ŒPointViewï¼Œä¸»è¦é€»è¾‘ä¹Ÿéƒ½åœ¨è¿™ä¸¤ä¸ªç±»ä¸­ï¼š</p>
<p><strong>PointView</strong>(ä¸»è¦æ˜¯ç•Œé¢UIï¼Œä¸å¤šä»‹ç»ï¼Œç›´æ¥ä¸Šä»£ç )</p>
<blockquote>
<p>PointView.h</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithFrame:(CGRect)frame</span><br><span class="line">                       withID:(NSString *)ID;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, copy, readonly) NSString             *ID;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€‰ä¸­</span></span><br><span class="line">@property (nonatomic, assign) BOOL             isSelected;</span><br><span class="line"><span class="comment">//è§£é”å¤±è´¥</span></span><br><span class="line">@property (nonatomic, assign) BOOL             isError;</span><br><span class="line"><span class="comment">//è§£é”æˆåŠŸ</span></span><br><span class="line">@property (nonatomic, assign) BOOL             isSuccess;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>-initWithFrame:withID:</code>ä¼ å…¥<code>frame</code>å’Œ<code>ID</code>ï¼Œç”¨äºåˆå§‹åŒ–<code>PointView</code>ï¼Œ</p>
</li>
<li><p><code>ID:</code>åªè¯»ï¼Œç”¨äºå¤–éƒ¨è·å–<code>ID</code>ï¼Œ</p>
</li>
<li><p><code>isSelected,isError,isSuccess:</code>ç”¨äºåˆ¤æ–­PointViewçš„çŠ¶æ€ä»¥æ˜¾ç¤ºä¸åŒçš„UIã€‚</p>
</li>
</ul>
<blockquote>
<p>PointView.m</p>
</blockquote>
<p>é€šè¿‡æ‡’åŠ è½½åˆå§‹åŒ–ä¸‰ä¸ªCAShapeLayer</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - æ‡’åŠ è½½</span><br><span class="line"><span class="comment">//å¤–å±‚æ‰‹åŠ¿æŒ‰é’®</span></span><br><span class="line">- (CAShapeLayer *)contentLayer</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!_contentLayer) &#123;</span><br><span class="line">        _contentLayer = [CAShapeLayer layer];</span><br><span class="line">        UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(<span class="number">2.0</span>, <span class="number">2.0</span>, SELF_WIDTH - <span class="number">4.0</span>, SELF_HEIGHT - <span class="number">4.0</span>) cornerRadius:(SELF_WIDTH - <span class="number">4.0</span>) / <span class="number">2.0</span>];</span><br><span class="line">        _contentLayer.path = path.CGPath;</span><br><span class="line">        _contentLayer.fillColor = RGBCOLOR(<span class="number">46.0</span>, <span class="number">47.0</span>, <span class="number">50.0</span>).CGColor;</span><br><span class="line">        _contentLayer.strokeColor = RGBCOLOR(<span class="number">26.0</span>, <span class="number">27.0</span>, <span class="number">29.0</span>).CGColor;</span><br><span class="line">        _contentLayer.strokeStart = <span class="number">0</span>;</span><br><span class="line">        _contentLayer.strokeEnd = <span class="number">1</span>;</span><br><span class="line">        _contentLayer.lineWidth = <span class="number">2</span>;</span><br><span class="line">        _contentLayer.cornerRadius = self.bounds.size.width / <span class="number">2.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _contentLayer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰‹åŠ¿æŒ‰é’®è¾¹æ¡†</span></span><br><span class="line">- (CAShapeLayer *)borderLayer</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!_borderLayer) &#123;</span><br><span class="line">        _borderLayer = [CAShapeLayer layer];</span><br><span class="line">        UIBezierPath *borderPath = [UIBezierPath bezierPathWithArcCenter:CGPointMake(SELF_WIDTH / <span class="number">2.0</span>, SELF_HEIGHT / <span class="number">2.0</span>) radius:SELF_WIDTH / <span class="number">2.0</span> startAngle:<span class="number">0</span> endAngle:<span class="number">2</span> * M_PI clockwise:NO];</span><br><span class="line">        _borderLayer.strokeColor = RGBCOLOR(<span class="number">105.0</span>, <span class="number">108.0</span>, <span class="number">111.0</span>).CGColor;</span><br><span class="line">        _borderLayer.fillColor = [UIColor clearColor].CGColor;</span><br><span class="line">        _borderLayer.strokeEnd = <span class="number">1</span>;</span><br><span class="line">        _borderLayer.strokeStart = <span class="number">0</span>;</span><br><span class="line">        _borderLayer.lineWidth = <span class="number">2</span>;</span><br><span class="line">        _borderLayer.path = borderPath.CGPath;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _borderLayer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€‰ä¸­æ—¶ï¼Œä¸­é—´æ ·å¼</span></span><br><span class="line">- (CAShapeLayer *)centerLayer</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!_centerLayer) &#123;</span><br><span class="line">        _centerLayer = [CAShapeLayer layer];</span><br><span class="line">        UIBezierPath *centerPath = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(SELF_WIDTH / <span class="number">2.0</span> - (SELF_WIDTH - <span class="number">4.0</span>) / <span class="number">4.0</span>, SELF_HEIGHT / <span class="number">2.0</span> - (SELF_HEIGHT - <span class="number">4.0</span>) / <span class="number">4.0</span>, (SELF_WIDTH - <span class="number">4.0</span>) / <span class="number">2.0</span>, (SELF_WIDTH - <span class="number">4.0</span>) / <span class="number">2.0</span>) cornerRadius:(SELF_WIDTH - <span class="number">4.0</span>) / <span class="number">4.0</span>];</span><br><span class="line">        _centerLayer.path = centerPath.CGPath;</span><br><span class="line">        _centerLayer.lineWidth = <span class="number">3</span>;</span><br><span class="line">        _centerLayer.strokeColor = [UIColor colorWithWhite:<span class="number">0</span> alpha:<span class="number">0.7</span>].CGColor;</span><br><span class="line">        _centerLayer.fillColor = RGBCOLOR(<span class="number">30.0</span>, <span class="number">180.0</span>, <span class="number">244.0</span>).CGColor;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _centerLayer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®PointViewçš„UIçŠ¶æ€</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®æƒ…å†µæ˜¾ç¤ºä¸‰ç§çŠ¶æ€</span></span><br><span class="line">- (<span class="keyword">void</span>)setIsSuccess:(BOOL)isSuccess</span><br><span class="line">&#123;</span><br><span class="line">    _isSuccess = isSuccess;</span><br><span class="line">    <span class="keyword">if</span> (_isSuccess) &#123;</span><br><span class="line">        self.centerLayer.fillColor = RGBCOLOR(<span class="number">43.0</span>, <span class="number">210.0</span>, <span class="number">110.0</span>).CGColor;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        self.centerLayer.fillColor = RGBCOLOR(<span class="number">30.0</span>, <span class="number">180.0</span>, <span class="number">244.0</span>).CGColor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setIsSelected:(BOOL)isSelected</span><br><span class="line">&#123;</span><br><span class="line">    _isSelected = isSelected;</span><br><span class="line">    <span class="keyword">if</span> (_isSelected) &#123;</span><br><span class="line">        self.centerLayer.hidden = NO;</span><br><span class="line">        self.borderLayer.strokeColor = RGBCOLOR(<span class="number">30.0</span>, <span class="number">180.0</span>, <span class="number">244.0</span>).CGColor;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        self.centerLayer.hidden = YES;</span><br><span class="line">        self.borderLayer.strokeColor = RGBCOLOR(<span class="number">105.0</span>, <span class="number">108.0</span>, <span class="number">111.0</span>).CGColor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setIsError:(BOOL)isError</span><br><span class="line">&#123;</span><br><span class="line">    _isError = isError;</span><br><span class="line">    <span class="keyword">if</span> (_isError) &#123;</span><br><span class="line">        self.centerLayer.fillColor = RGBCOLOR(<span class="number">222.0</span>, <span class="number">64.0</span>, <span class="number">60.0</span>).CGColor;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        self.centerLayer.fillColor = RGBCOLOR(<span class="number">30.0</span>, <span class="number">180.0</span>, <span class="number">244.0</span>).CGColor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>GesturesView</strong>ï¼ˆåŸºæœ¬æ‰€æœ‰çš„é€»è¾‘éƒ½åœ¨è¿™ä¸ªé‡Œé¢äº†ï¼‰</p>
<blockquote>
<p>GesturesView.h</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å›ä¼ é€‰æ‹©çš„id</span></span><br><span class="line">typedef <span class="keyword">void</span> (^GestureBlock)(NSArray *selectedID);</span><br><span class="line"><span class="comment">//å›ä¼ æ‰‹åŠ¿éªŒè¯ç»“æœ</span></span><br><span class="line">typedef <span class="keyword">void</span> (^UnlockBlock)(BOOL isSuccess);</span><br><span class="line"><span class="comment">//è®¾ç½®æ‰‹åŠ¿å¤±è´¥</span></span><br><span class="line">typedef <span class="keyword">void</span> (^SettingBlock)(<span class="keyword">void</span>);</span><br><span class="line"></span><br><span class="line">@interface GesturesView : UIView</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> è®¾ç½®å¯†ç æ—¶ï¼Œè¿”å›è®¾ç½®çš„æ‰‹åŠ¿å¯†ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@property (nonatomic, copy) GestureBlock             gestureBlock;</span><br><span class="line">                             </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> è¿”å›è§£é”æˆåŠŸè¿˜æ˜¯å¤±è´¥çŠ¶æ€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@property (nonatomic, copy) UnlockBlock            unlockBlock;</span><br><span class="line">                             </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> åˆ¤æ–­æ‰‹åŠ¿å¯†ç æ—¶å€™è®¾ç½®æˆåŠŸï¼ˆæ‰‹åŠ¿å¯†ç ä¸å¾—å°‘äºå››ä¸ªç‚¹ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@property (nonatomic, copy) SettingBlock           settingBlock;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> åˆ¤æ–­æ˜¯è®¾ç½®æ‰‹åŠ¿è¿˜æ˜¯æ‰‹åŠ¿è§£é”</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@property (nonatomic, assign) BOOL         settingGesture;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ç”³æ˜äº†ä¸‰ä¸ªblockï¼š</p>
<ul>
<li><code>GestureBlockï¼š</code>å°†é€‰æ‹©çš„IDæœ‰åºé›†åˆå›ä¼ ç»™æ§åˆ¶å™¨ï¼Œ</li>
<li><code>UnlockBlockï¼š</code>å›ä¼ æ‰‹åŠ¿éªŒè¯ç»“æœï¼Œ</li>
<li><code>SettingBlcokï¼š</code>è®¾ç½®æ‰‹åŠ¿å¤±è´¥</li>
</ul>
<p>å±æ€§ï¼š</p>
<ul>
<li><code>gestureBlock,unlockBlock,settingBlock:</code>åˆ†åˆ«æ˜¯å¯¹åº”blockçš„å®ä¾‹ï¼Œ</li>
<li><code>settingGesture:</code>ç”¨äºåˆ¤æ–­æ˜¯è®¾ç½®æ‰‹åŠ¿è¿˜æ˜¯æ‰‹åŠ¿è§£é”</li>
</ul>
<blockquote>
<p>GesturesView.h <strong>ï¼ˆæœ€ä¸»è¦çš„é€»è¾‘å®ç°éƒ¨åˆ†ï¼‰</strong></p>
</blockquote>
<p>ç§æœ‰å±æ€§éƒ¨åˆ†ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯å˜æ•°ç»„ï¼Œç”¨äºå­˜æ”¾åˆå§‹åŒ–çš„ç‚¹å‡»æŒ‰é’®</span></span><br><span class="line">@property (nonatomic, strong) NSMutableArray             *pointViews;</span><br><span class="line"><span class="comment">//è®°å½•æ‰‹åŠ¿æ»‘åŠ¨çš„èµ·å§‹ç‚¹</span></span><br><span class="line">@property (nonatomic, assign) CGPoint                    startPoint;</span><br><span class="line"><span class="comment">//è®°å½•æ‰‹åŠ¿æ»‘åŠ¨çš„ç»“æŸç‚¹</span></span><br><span class="line">@property (nonatomic, assign) CGPoint                    endPoint;</span><br><span class="line"><span class="comment">//å­˜å‚¨é€‰ä¸­çš„æŒ‰é’®ID</span></span><br><span class="line">@property (nonatomic, strong) NSMutableArray             *selectedView;</span><br><span class="line"><span class="comment">//æ‰‹åŠ¿æ»‘åŠ¨ç»è¿‡çš„ç‚¹çš„è¿çº¿</span></span><br><span class="line">@property (nonatomic, strong) CAShapeLayer               *lineLayer;</span><br><span class="line"><span class="comment">//æ‰‹åŠ¿æ»‘åŠ¨çš„path</span></span><br><span class="line">@property (nonatomic, strong) UIBezierPath               *linePath;</span><br><span class="line"><span class="comment">//ç”¨äºå­˜å‚¨é€‰ä¸­çš„æŒ‰é’®</span></span><br><span class="line">@property (nonatomic, strong) NSMutableArray             *selectedViewCenter;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ—¶å€™æ»‘åŠ¨æ˜¯å¦ç»“æŸ</span></span><br><span class="line">@property (nonatomic, assign) BOOL                       touchEnd;</span><br></pre></td></tr></table></figure>
<p>ä»£ç å®ç°éƒ¨åˆ†ï¼š</p>
<p>åˆå§‹åŒ–<code>startPoint</code>ï¼Œ<code>endPoint</code>ä»¥åŠ<strong>9</strong>ä¸ª<code>PointView</code>æŒ‰é’®ï¼Œ<code>startPoint</code>å’Œ<code>endPoint</code>é»˜è®¤ä¸º<code>0</code>ï¼Œå¹¶è®¾ç½®<code>PointView</code>çš„<code>ID</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆå§‹åŒ–å¼€å§‹ç‚¹ä½å’Œç»“æŸç‚¹ä½</span></span><br><span class="line">    self.startPoint = CGPointZero;</span><br><span class="line">    self.endPoint = CGPointZero;</span><br><span class="line">        <span class="comment">//å¸ƒå±€æ‰‹åŠ¿æŒ‰é’®ï¼ˆé‡‡ç”¨è‡ªå®šä¹‰çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼‰</span></span><br><span class="line">    <span class="keyword">for</span> (int i = <span class="number">0</span>; i&lt;<span class="number">9</span> ; i++) &#123;</span><br><span class="line">        PointView *pointView = [[PointView alloc] initWithFrame:CGRectMake((i % <span class="number">3</span>) * (SELF_WIDTH / <span class="number">2.0</span> - <span class="number">31.0</span>) + <span class="number">1</span>, (i / <span class="number">3</span>) * (SELF_HEIGHT / <span class="number">2.0</span> - <span class="number">31.0</span>) + <span class="number">1</span>, <span class="number">60</span>, <span class="number">60</span>)</span><br><span class="line">                                                         withID:[NSString stringWithFormat:@<span class="string">"gestures %d"</span>,i + <span class="number">1</span>]];</span><br><span class="line">        [self addSubview:pointView];</span><br><span class="line">        [self.pointViews addObject:pointView];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æ»‘åŠ¨äº‹ä»¶ï¼š</p>
<ul>
<li>å¼€å§‹æ»‘åŠ¨ï¼š</li>
</ul>
<p>å¦‚æœ<code>self.touchEnd</code>ä¸º<code>YES</code>åˆ™ç›´æ¥returnï¼Œä¸º<code>NO</code>å¼€å§‹ä»¥ä¸‹å¤„ç†ï¼š</p>
<ol>
<li>é¦–å…ˆè·å–åˆ°æ»‘åŠ¨çš„ç‚¹ï¼Œéå†æ‰€æœ‰çš„<code>PointView</code>ï¼Œåˆ¤æ–­è¯¥ç‚¹æ˜¯å¦åœ¨æŸä¸ª<code>æ‰‹åŠ¿æŒ‰é’®</code>èŒƒå›´,åœ¨èŒƒå›´å†…è®°å½•çŠ¶æ€ï¼Œå¦åˆ™ä¸åšå¤„ç†;</li>
<li>åˆ¤æ–­<code>self.startPoint</code>æ˜¯å¦ä¸º<code>CGPointZero</code>ï¼Œå¦‚æœä¸º<code>YES</code>ï¼Œåˆ™å°†è¯¥<code>æ‰‹åŠ¿æŒ‰é’®</code>çš„<code>center</code>èµ‹å€¼ç»™<code>self.startPoint</code>;</li>
<li>åˆ¤æ–­è¯¥æ‰‹åŠ¿æŒ‰é’®çš„<code>center</code>æ˜¯å¦åŒ…å«åœ¨<code>self.selectedViewCenter</code>ä¸­ï¼Œå¦‚æœä¸º<code>YES</code>ï¼Œå¿½ç•¥æ­¤æ¬¡è®°å½•ï¼Œä¸º<code>NO</code>åˆ™è®°å½•è¯¥ä¸­å¿ƒç‚¹ï¼Œç”¨äº<code>ç”»çº¿</code>ï¼ŒåŒæ ·è®°å½•è¯¥<code>æ‰‹åŠ¿æŒ‰é’®</code>çš„<code>ID</code>ï¼Œç”¨äºè®°å½•ä¿å­˜æ‰‹åŠ¿å¯†ç ;</li>
<li>å¦‚æœ<code>self.startPoint</code>ä¸ä¸º<code>CGPointZero</code>ï¼Œåˆ™è®°å½•å½“å‰æ»‘åŠ¨åˆ°çš„ç‚¹ä¸º<code>self.endPoint</code>ï¼Œå¹¶åˆ’çº¿ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//touchäº‹ä»¶</span></span><br><span class="line">- (<span class="keyword">void</span>)touchesMoved:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (self.touchEnd) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    UITouch *touch = [touches anyObject];</span><br><span class="line">    CGPoint point = [touch locationInView:self];</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ‰‹åŠ¿æ»‘åŠ¨æ˜¯å¦åœ¨æ‰‹åŠ¿æŒ‰é’®èŒƒå›´</span></span><br><span class="line">    <span class="keyword">for</span> (PointView *pointView <span class="keyword">in</span> self.pointViews) &#123;</span><br><span class="line">        <span class="comment">//æ»‘åŠ¨åˆ°æ‰‹åŠ¿æŒ‰é’®èŒƒå›´ï¼Œè®°å½•çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">if</span> (CGRectContainsPoint(pointView.frame, point)) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœå¼€å§‹æŒ‰é’®ä¸ºzeroï¼Œè®°å½•å¼€å§‹æŒ‰é’®ï¼Œå¦åˆ™ä¸éœ€è¦è®°å½•å¼€å§‹æŒ‰é’®</span></span><br><span class="line">            <span class="keyword">if</span> (CGPointEqualToPoint(self.startPoint, CGPointZero)) &#123;</span><br><span class="line">                self.startPoint = pointView.center;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//åˆ¤æ–­è¯¥æ‰‹åŠ¿æŒ‰é’®çš„ä¸­å¿ƒç‚¹æ˜¯å¦è®°å½•ï¼Œæœªè®°å½•åˆ™è®°å½•</span></span><br><span class="line">            <span class="keyword">if</span> (![self.selectedViewCenter containsObject:[NSValue valueWithCGPoint:pointView.center]]) &#123;</span><br><span class="line">                [self.selectedViewCenter addObject:[NSValue valueWithCGPoint:pointView.center]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//åˆ¤æ–­è¯¥æ‰‹åŠ¿æŒ‰é’®æ˜¯å¦å·²ç»é€‰ä¸­ï¼Œæœªé€‰ä¸­å°±é€‰ä¸­</span></span><br><span class="line">            <span class="keyword">if</span> (![self.selectedView containsObject:pointView.ID]) &#123;</span><br><span class="line">                [self.selectedView addObject:pointView.ID];</span><br><span class="line">                pointView.isSelected = YES;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœå¼€å§‹ç‚¹ä½ä¸ä¸ºzeroåˆ™è®°å½•ç»“æŸç‚¹ä½ï¼Œå¦åˆ™è·³è¿‡ä¸è®°å½•</span></span><br><span class="line">    <span class="keyword">if</span> (!CGPointEqualToPoint(self.startPoint, CGPointZero)) &#123;</span><br><span class="line">        self.endPoint = point;</span><br><span class="line">        [self p_drawLines];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç”»çº¿ï¼š</li>
</ul>
<p>å¦‚æœ<code>self.touchEnd</code>ä¸º<code>YES</code>åˆ™ç›´æ¥returnï¼Œä¸º<code>NO</code>å¼€å§‹ç”»çº¿ï¼š</p>
<ol>
<li>é¦–å…ˆç§»é™¤<code>self.lineLayer</code>,<code>self.linePath</code>,<strong>å¦åˆ™ä½ ä¼šå‘ç°éšç€ä½ çš„æ»‘åŠ¨ï¼Œä¼šå‡ºç°å¾ˆå¤šæ¡çº¿ã€‚</strong>ï¼›</li>
<li>è®¾ç½®<code>self.linePath</code>çš„èµ·å§‹ç‚¹ï¼Œå¹¶éå†<code>self.selectedViewCenter</code>,ä¸º<code>self.linePath</code>æ·»åŠ èŠ‚ç‚¹ï¼Œæœ€åå°†<code>self.endPoint</code>æ·»åŠ ä¸Šå»ï¼ˆä¸ºç»“æŸæ»‘åŠ¨çš„æ—¶å€™ï¼Œ<code>self.endPoint</code>ä¸ºå½“å‰æ»‘åŠ¨ä½ç½®çš„ç‚¹ï¼‰ï¼›</li>
<li>è®¾ç½®<code>self.lineLayer</code>çš„ç›¸åº”å±æ€§ï¼Œå¹¶æ·»åŠ åˆ°<code>self.layer</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”»çº¿</span></span><br><span class="line">- (<span class="keyword">void</span>)p_drawLines</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//ç»“æŸæ‰‹åŠ¿æ»‘åŠ¨ï¼Œä¸ç”»çº¿</span></span><br><span class="line">    <span class="keyword">if</span> (self.touchEnd) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç§»é™¤pathçš„ç‚¹å’ŒlineLayer</span></span><br><span class="line">    [self.lineLayer removeFromSuperlayer];</span><br><span class="line">    [self.linePath removeAllPoints];</span><br><span class="line">    <span class="comment">//ç”»çº¿</span></span><br><span class="line">    [self.linePath moveToPoint:self.startPoint];</span><br><span class="line">    <span class="keyword">for</span> (NSValue *pointValue <span class="keyword">in</span> self.selectedViewCenter) &#123;</span><br><span class="line">        [self.linePath addLineToPoint:[pointValue CGPointValue]];</span><br><span class="line">    &#125;</span><br><span class="line">    [self.linePath addLineToPoint:self.endPoint];</span><br><span class="line">    </span><br><span class="line">    self.lineLayer.path = self.linePath.CGPath;</span><br><span class="line">    self.lineLayer.lineWidth = <span class="number">4.0</span>;</span><br><span class="line">    self.lineLayer.strokeColor = RGBCOLOR(<span class="number">30.0</span>, <span class="number">180.0</span>, <span class="number">244.0</span>).CGColor;</span><br><span class="line">    self.lineLayer.fillColor = [UIColor clearColor].CGColor;</span><br><span class="line">    </span><br><span class="line">    [self.layer addSublayer:self.lineLayer];</span><br><span class="line">    </span><br><span class="line">    self.layer.masksToBounds = YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç»“æŸæ»‘åŠ¨ï¼š</li>
</ul>
<ol>
<li>å°†<code>self.endPoint</code>è®¾ç½®ä¸º<code>self.selectedViewCenter.lastObject</code>ï¼Œå¦‚æœ<code>self.endPoint</code>è¿˜æ˜¯ä¸º<code>CGPointZero</code>ï¼Œåˆ™è¯´æ˜æœªæ»‘åŠ¨åˆ°<code>æ‰‹åŠ¿æŒ‰é’®</code>èŒƒå›´ï¼Œä¸åšä»»ä½•å¤„ç†ï¼Œå¦åˆ™ç»§ç»­ä»¥ä¸‹é€»è¾‘å¤„ç†ï¼›</li>
<li>å†æ¬¡è°ƒç”¨<code>-(void)p_drawLines</code>ç”»çº¿ï¼›</li>
<li>åˆ¤æ–­æ˜¯<code>è®¾ç½®æ‰‹åŠ¿å¯†ç </code>è¿˜æ˜¯<code>æ‰‹åŠ¿è§£é”</code>ï¼›<ol>
<li><code>è®¾ç½®æ‰‹åŠ¿å¯†ç </code>ï¼š<ol>
<li>å¦‚æœé€‰ä¸­çš„<code>æ‰‹åŠ¿æŒ‰é’®</code>æ•°é‡å°‘äº<strong>4</strong>ï¼Œè®¾ç½®<code>self.touchEnd = NO</code>ä½¿å…¶å¯ä»¥é‡æ–°è®¾ç½®ï¼Œ<code>return</code>ç»“æŸæ­¤æ¬¡è®¾ç½®ï¼›</li>
<li>å¦‚æœè®¾ç½®çš„<code>æ‰‹åŠ¿æŒ‰é’®</code>ç¬¦åˆè¦æ±‚åˆ™è°ƒç”¨<code>self.gestureBlock(self.selectedView)</code>å°†æ‰‹åŠ¿å¯†ç å›ä¼ ç»™<code>æ§åˆ¶å™¨</code>ï¼›</li>
</ol>
</li>
<li><code>æ‰‹åŠ¿è§£é”</code>ï¼š<ol>
<li>è·å–æœ¬åœ°å­˜å‚¨çš„<code>æ‰‹åŠ¿å¯†ç </code>ï¼›<strong><del>æˆ‘è¿™é‡Œç”¨çš„æ˜¯<code>NSUserDefaults</code>ï¼Œå…¶å®è¿™æ˜¯ä¸å®‰å…¨çš„ï¼Œå»ºè®®ä½¿ç”¨<code>Keychain</code>ï¼Œæˆ‘ä¹Ÿä¼šåœ¨åç»­çš„æ›´æ–°ä¸­ä½¿ç”¨<code>Keychain</code></del> å·²ä½¿ç”¨keychainä¿å­˜å¯†ç ,å…·ä½“ä½¿ç”¨è§<a href="https://github.com/yinxing29/YZXUnlock" target="_blank" rel="noopener">Demo</a></strong></li>
<li>å¦‚æœ<code>self.selectedView</code>å’Œæœ¬åœ°æ‰‹åŠ¿å¯†ç ä¸€æ ·ï¼Œåˆ™è§£é”æˆåŠŸï¼Œå¹¶è®¾ç½®<code>pointView.isSuccess = YES</code>æ”¹å˜<code>æ‰‹åŠ¿æŒ‰é’®</code>æ ·å¼ç­‰ï¼Œå¹¶è°ƒç”¨<code>self.unlockBlock(YES)</code>ï¼Œå‘ŠçŸ¥<code>æ§åˆ¶å™¨</code>ç»“æœï¼›</li>
<li>å¦åˆ™è§£é”å¤±è´¥ï¼Œ<code>pointView.isError = YES</code>æ”¹å˜<code>æ‰‹åŠ¿æŒ‰é’®</code>æ ·å¼ç­‰,å¹¶è°ƒç”¨<code>self.unlockBlock(NO)</code>ï¼Œå‘ŠçŸ¥<code>æ§åˆ¶å™¨</code>ç»“æœï¼›</li>
</ol>
</li>
</ol>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)touchesEnded:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//ç»“æŸæ‰‹åŠ¿æ»‘åŠ¨çš„æ—¶å€™ï¼Œå°†ç»“æŸæŒ‰é’®è®¾ç½®ä¸ºæœ€åä¸€ä¸ªæ‰‹åŠ¿æŒ‰é’®çš„ä¸­å¿ƒç‚¹ï¼Œå¹¶ç”»çº¿</span></span><br><span class="line">    self.endPoint = [self.selectedViewCenter.lastObject CGPointValue];</span><br><span class="line">    <span class="comment">//å¦‚æœendPointè¿˜æ˜¯ä¸ºzeroè¯´æ˜æœªæ»‘åŠ¨åˆ°æœ‰æ•ˆä½ç½®ï¼Œä¸åšå¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span> (CGPointEqualToPoint(self.endPoint, CGPointZero)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    [self p_drawLines];</span><br><span class="line">    <span class="comment">//æ”¹å˜æ‰‹åŠ¿æ»‘åŠ¨ç»“æŸçš„çŠ¶æ€ï¼Œä¸ºyesåˆ™æ— æ³•åœ¨æ»‘åŠ¨æ‰‹åŠ¿åˆ’çº¿</span></span><br><span class="line">    self.touchEnd = YES;</span><br><span class="line">    <span class="comment">//è®¾ç½®æ‰‹åŠ¿æ—¶ï¼Œè¿”å›è®¾ç½®çš„æ—¶å€™å¯†ç ï¼Œå¦åˆ™ç»§ç»­ä¸‹é¢çš„æ“ä½œè¿›è¡Œæ‰‹åŠ¿è§£é”</span></span><br><span class="line">    <span class="keyword">if</span> (_gestureBlock &amp;&amp; _settingGesture) &#123;</span><br><span class="line">        <span class="comment">//æ‰‹åŠ¿å¯†ç ä¸å¾—å°äº4ä¸ªç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (self.selectedView.count &lt; <span class="number">4</span>) &#123;</span><br><span class="line">            self.touchEnd = NO;</span><br><span class="line">            <span class="keyword">for</span> (PointView *pointView <span class="keyword">in</span> self.pointViews) &#123;</span><br><span class="line">                pointView.isSelected = NO;</span><br><span class="line">            &#125;</span><br><span class="line">            [self.lineLayer removeFromSuperlayer];</span><br><span class="line">            [self.selectedView removeAllObjects];</span><br><span class="line">            self.startPoint = CGPointZero;</span><br><span class="line">            self.endPoint = CGPointZero;</span><br><span class="line">            [self.selectedViewCenter removeAllObjects];</span><br><span class="line">            <span class="keyword">if</span> (_settingBlock) &#123;</span><br><span class="line">                self.settingBlock();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        _gestureBlock(self.selectedView);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ‰‹åŠ¿è§£é”</span></span><br><span class="line">    NSArray *selectedID = [[NSUserDefaults standardUserDefaults] objectForKey:@<span class="string">"GestureUnlock"</span>];</span><br><span class="line">    <span class="comment">//è§£é”æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span> ([self.selectedView isEqualToArray:selectedID]) &#123;</span><br><span class="line">        <span class="comment">//è§£é”æˆåŠŸï¼Œéå†pointviewï¼Œè®¾ç½®ä¸ºæˆåŠŸçŠ¶æ€</span></span><br><span class="line">        <span class="keyword">for</span> (PointView *pointView <span class="keyword">in</span> self.pointViews) &#123;</span><br><span class="line">            pointView.isSuccess = YES;</span><br><span class="line">        &#125;</span><br><span class="line">        self.lineLayer.strokeColor = RGBCOLOR(<span class="number">43.0</span>, <span class="number">210.0</span>, <span class="number">110.0</span>).CGColor;</span><br><span class="line">        <span class="keyword">if</span> (_unlockBlock) &#123;</span><br><span class="line">            self.unlockBlock(YES);</span><br><span class="line">        &#125;</span><br><span class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1.5</span> * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">            [[NSNotificationCenter defaultCenter] postNotificationName:@<span class="string">"UnlockLoginSuccess"</span> object:nil];</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;<span class="comment">//è§£é”å¤±è´¥</span></span><br><span class="line">        <span class="comment">//è§£é”å¤±è´¥ï¼Œéå†pointViewï¼Œè®¾ç½®ä¸ºå¤±è´¥çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">for</span> (PointView *pointView <span class="keyword">in</span> self.pointViews) &#123;</span><br><span class="line">            pointView.isError = YES;</span><br><span class="line">        &#125;</span><br><span class="line">        self.lineLayer.strokeColor = RGBCOLOR(<span class="number">222.0</span>, <span class="number">64.0</span>, <span class="number">60.0</span>).CGColor;</span><br><span class="line">        <span class="keyword">if</span> (_unlockBlock) &#123;</span><br><span class="line">            self.unlockBlock(NO);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œå°±å®ç°äº†<code>æ‰‹åŠ¿è§£é”</code>çš„æ‰€æœ‰é€»è¾‘ï¼Œåœ¨å®ç°ä¹‹å‰è¿˜åœ¨æ‹…å¿ƒæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œç»“æœå®ç°å‡ºæ¥ä¹‹åæ„Ÿè§‰å…¶å®å¾ˆç®€å•ã€‚</p>
<hr>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©åˆ°ä¸€äº›äººã€‚å¯¹äº<code>ä»£ç </code>å’Œ<code>åšå®¢</code>çš„ä¸€äº›<code>è§„èŒƒ</code>å¸Œæœ›å¤§å®¶è°…è§£ä¸€ä¸‹äº†ï¼Œåé¢ä¹Ÿä¼šæ…¢æ…¢å»ä¼˜åŒ–çš„ã€‚æœ€åçš„æœ€åé™„ä¸ŠDemoçš„é“¾æ¥ <strong><a href="https://github.com/yinxing29/YZXUnlock" target="_blank" rel="noopener">Demo-GitHub</a></strong>ã€‚</p>
<p><div id="container"></div></p>
<p><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"></p>
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  id: 'firstArticle', // å¯é€‰ã€‚é»˜è®¤ä¸º location.href
  owner: 'yinxing29',
  repo: 'YZXUnlock',
  oauth: {
    client_id: '3d0471920900c002ea9e',
    client_secret: 'c1ca98a130c157a8261e3db938deb692523d1eb2',
  },
})
gitment.render('container')
</script>



    </article>
    <!-- license  -->
    
        <div class="license-wrapper">
            <p>åŸæ–‡ä½œè€…: <a href="http://yoursite.com">yinxing29'blog</a>
            <p>åŸæ–‡é“¾æ¥: <a href="http://yoursite.com/2018/05/14/iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”/">http://yoursite.com/2018/05/14/iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”/</a>
            <p>å‘è¡¨æ—¥æœŸ: <a href="http://yoursite.com/2018/05/14/iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”/">May 14th 2018, 7:39:25</a>
            <p>ç‰ˆæƒå£°æ˜: æœªç»åŒæ„ï¼Œç¦æ­¢è½¬è½½</p>
        </div>
    
    <!-- paginator  -->
    <ul class="post-paginator">
        <li class="next">
            
                <div class="nextSlogan">Next Post</div>
                <a href= "/2018/05/14/iOS-è‡ªå®šä¹‰æ—¥å†ï¼ˆæ—¥æœŸé€‰æ‹©ï¼‰æ§ä»¶/" title= iOS è‡ªå®šä¹‰æ—¥å†ï¼ˆæ—¥æœŸé€‰æ‹©ï¼‰æ§ä»¶ >
                    <div class="nextTitle">iOS è‡ªå®šä¹‰æ—¥å†ï¼ˆæ—¥æœŸé€‰æ‹©ï¼‰æ§ä»¶</div>
                </a>
            
        </li>
        <li class="previous">
            
        </li>
    </ul>
    <!-- è¯„è®ºæ’ä»¶ -->
    <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->

<!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
    
    
    <!--PCç‰ˆ-->

    <!--PCç‰ˆ-->


    
    <!-- è¯„è®º -->
</main>
            <!-- profile -->
            
        </div>
        <footer class="footer footer-unloaded">
    <!-- social  -->
    
    <div class="social">
        
    
        
            
                <a href="mailto:yinxing29@sina.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="https://github.com/yinxing29" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
            
                <span class="iconfont-archer wechat" title=wechat>
                  
                  <img class="profile-qr" src="http://p5m3egx6g.bkt.clouddn.com/wechat.png" />
                </span>
            
        
    
        
            
                <span class="iconfont-archer qq" title=qq>
                  
                  <img class="profile-qr" src="http://p5m3egx6g.bkt.clouddn.com/qq.png" />
                </span>
            
        
    
        
    
        
    
        
    
        
            
                <a href="https://www.facebook.com/profile.php?id=100012741854533" class="iconfont-archer facebook" target="_blank" title=facebook></a>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- ä¸è’œå­  -->
    
    <div class="busuanzi-container">
        <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span>
        </span>
    </div>
    
</footer>
    </div>
    <!-- toc -->
    
    <div class="toc-wrapper" style=
    







top:50vh;

    >
        <div class="toc-catalog">
            <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
        </div>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”"><span class="toc-number">1.</span> <span class="toc-text">iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰è¨€"><span class="toc-number">1.1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æŒ‡çº¹è§£é”"><span class="toc-number">1.2.</span> <span class="toc-text">æŒ‡çº¹è§£é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ç¬¬ä¸€æ­¥"><span class="toc-number">1.2.1.</span> <span class="toc-text">ç¬¬ä¸€æ­¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç¬¬äºŒæ­¥"><span class="toc-number">1.2.2.</span> <span class="toc-text">ç¬¬äºŒæ­¥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ‰‹åŠ¿è§£é”"><span class="toc-number">1.3.</span> <span class="toc-text">æ‰‹åŠ¿è§£é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#æ„æ€"><span class="toc-number">1.3.1.</span> <span class="toc-text">æ„æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®ç°-ï¼ˆå·¥ç¨‹ä»£ç è§æ–‡æœ«é“¾æ¥ï¼‰"><span class="toc-number">1.3.2.</span> <span class="toc-text">å®ç° ï¼ˆå·¥ç¨‹ä»£ç è§æ–‡æœ«é“¾æ¥ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æœ€å"><span class="toc-number">1.4.</span> <span class="toc-text">æœ€å</span></a></li></ol></li></ol>
    </div>
    
    <div class="back-top iconfont-archer">&#xe639;</div>
    <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
          <div class="sidebar-panel-archives">
    <!-- åœ¨ejsä¸­å°†archiveæŒ‰ç…§æ—¶é—´æ’åº -->
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <div class="total-archive"> Total : 3 </div>
    
    <div class="post-archive">
    
    
    
    
    <div class="archive-year"> 2018 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/14</span><a class="archive-post-title" href= "/2018/05/14/iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”/" >iOSæŒ‡çº¹è§£é”å’Œæ‰‹åŠ¿è§£é”</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/14</span><a class="archive-post-title" href= "/2018/05/14/iOS-è‡ªå®šä¹‰æ—¥å†ï¼ˆæ—¥æœŸé€‰æ‹©ï¼‰æ§ä»¶/" >iOS è‡ªå®šä¹‰æ—¥å†ï¼ˆæ—¥æœŸé€‰æ‹©ï¼‰æ§ä»¶</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/14</span><a class="archive-post-title" href= "/2018/05/14/iOS-webViewç¼“å­˜ï¼Œä¿è¯åŠ è½½æœ€æ–°html/" >iOS webViewç¼“å­˜ï¼Œä¿è¯åŠ è½½æœ€æ–°html</a>
        </li>
    
    </div>
  </div>
        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
    
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
    ç¼ºå¤±æ¨¡å—ã€‚<br/>
    1ã€è¯·ç¡®ä¿nodeç‰ˆæœ¬å¤§äº6.2<br/>
    2ã€åœ¨åšå®¢æ ¹ç›®å½•ï¼ˆæ³¨æ„ä¸æ˜¯archeræ ¹ç›®å½•ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br/>
    <span style="color: #f75357; font-size: 1rem; line-height: 2rem;">npm i hexo-generator-json-content --save</span><br/>
    3ã€åœ¨æ ¹ç›®å½•_config.ymlé‡Œæ·»åŠ é…ç½®ï¼š
    <pre style="color: #787878; font-size: 0.6rem;">
jsonContent:
  meta: false
  pages: false
  posts:
    title: true
    date: true
    path: true
    text: false
    raw: false
    content: false
    slug: false
    updated: false
    comments: false
    link: false
    permalink: false
    excerpt: false
    categories: true
    tags: true</pre>
    </div> 
    <div class="sidebar-tags-list"></div>
</div>
        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>
    </div>
</div> 
    <script>
    var siteMeta = {
        root: '/',
        author: 'yinxing29'blog'
    }
</script>
    <!-- CDN failover -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ === 'undefined')
        {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js">\x3C/script>')
        }
    </script>
    <script src="/scripts/main.js"></script>
    <!-- busuanzi  -->
    
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- CNZZ  -->
    
    </div>
    <!-- async load share.js -->
    
        <script src="/scripts/share.js" async></script>    
    
    </body>
</html>


